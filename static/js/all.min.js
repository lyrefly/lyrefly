"undefined"==typeof Array.isArray&&(Array.isArray=function(r){return"[object Array]"===Object.prototype.toString.call(r)});
window.onload=function(){new Modal({title:"Login to LyreFly",content:document.getElementById("login_menu"),linkSelector:".trigger-login"}),new Modal({title:"Register an Account on LyreFly",content:document.getElementById("register_menu"),linkSelector:".trigger-register"})};
!function(t){function e(){var t=document.createDocumentFragment();if(this.modal=document.createElement("div"),this.modal.className="modal "+this.settings.className,this.modal.style.minWidth=this.settings.minWidth+"px",this.modal.style.maxWidth=this.settings.maxWidth+"px",this.settings.hasCloseButton===!0&&(this.closeButton=document.createElement("button"),this.closeButton.className="modal-close modal-close-button",this.closeButton.innerHTML="Ã—",this.modal.appendChild(this.closeButton)),this.settings.hasOverlay===!0&&(this.overlay=document.createElement("div"),this.overlay.className="modal-overlay "+this.settings.className,t.appendChild(this.overlay)),null!==this.settings.title){var e=document.createElement("h2");e.className="modal-title",e.innerHTML=this.settings.title,this.modal.appendChild(e)}var i=document.createElement("div");i.className="modal-content",i.innerHTML=this.settings.content,this.modal.appendChild(i),t.appendChild(this.modal),document.body.appendChild(t)}function i(){this.closeButton&&this.closeButton.addEventListener("click",this.close.bind(this)),this.overlay&&this.overlay.addEventListener("click",this.close.bind(this))}function s(){var t=document.createElement("div");return t.style.WebkitTransition?"webkitTransitionEnd":t.style.OTransition?"oTransitionEnd":"transitionend"}function n(t){t.parentElement&&t.parentElement.removeChild(t)}t.Modal=function(t){this.modal=null,this.overlay=null,this.closeButton=null,this.settings={className:"zoom",hasCloseButton:!0,content:"",title:null,maxWidth:800,minWidth:200,hasOverlay:!0,isFixed:!0,linkSelector:null};var e=this;if(t&&"object"==typeof t)for(var i in this.settings)t.hasOwnProperty(i)&&(this.settings[i]=t[i]);var s=this.settings.content;if(s&&s.innerHTML&&(s=s.innerHTML,n(this.settings.content),this.settings.content=s),null!==this.settings.linkSelector)for(var l=document.querySelectorAll(this.settings.linkSelector),a=0;a<l.length;a++)l[a].addEventListener("click",function(t){t.preventDefault(),e.open()})},Modal.prototype.open=function(){e.call(this),i.call(this),window.getComputedStyle(this.modal).height,this.modal.className+=this.modal.offsetHeight>window.innerHeight?" modal-active modal-anchored":" modal-active",this.overlay&&(this.overlay.className+=" modal-active")},Modal.prototype.close=function(){var t=this;this.modal.className=this.modal.className.replace(" modal-active",""),this.modal.addEventListener(s(),function(){n(t.modal)}),this.overlay&&(this.overlay.className=this.overlay.className.replace(" modal-active",""),this.overlay.addEventListener(s(),function(){n(t.overlay)}))}}(window);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZ1bmN0aW9ucy5qcyIsIm1haW4uanMiLCJtb2RhbC5qcyJdLCJuYW1lcyI6WyJBcnJheSIsImlzQXJyYXkiLCJvYmoiLCJPYmplY3QiLCJwcm90b3R5cGUiLCJ0b1N0cmluZyIsImNhbGwiLCJ3aW5kb3ciLCJvbmxvYWQiLCJNb2RhbCIsInRpdGxlIiwiY29udGVudCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJsaW5rU2VsZWN0b3IiLCJnIiwiYnVpbGRNb2RhbCIsImZyYWdtZW50IiwiY3JlYXRlRG9jdW1lbnRGcmFnbWVudCIsInRoaXMiLCJtb2RhbCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJzZXR0aW5ncyIsInN0eWxlIiwibWluV2lkdGgiLCJtYXhXaWR0aCIsImhhc0Nsb3NlQnV0dG9uIiwiY2xvc2VCdXR0b24iLCJpbm5lckhUTUwiLCJhcHBlbmRDaGlsZCIsImhhc092ZXJsYXkiLCJvdmVybGF5IiwiYm9keSIsImluaXRpYWxpemVFdmVudHMiLCJhZGRFdmVudExpc3RlbmVyIiwiY2xvc2UiLCJiaW5kIiwidHJhbnNpdGlvbkVuZCIsImVsIiwiV2Via2l0VHJhbnNpdGlvbiIsIk9UcmFuc2l0aW9uIiwicmVtb3ZlRWxlbWVudCIsInBhcmVudEVsZW1lbnQiLCJyZW1vdmVDaGlsZCIsIm1vZGFsU2V0dGluZ3MiLCJpc0ZpeGVkIiwic2VsZiIsImtleSIsImhhc093blByb3BlcnR5IiwibGlua3MiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaSIsImxlbmd0aCIsImUiLCJwcmV2ZW50RGVmYXVsdCIsIm9wZW4iLCJnZXRDb21wdXRlZFN0eWxlIiwiaGVpZ2h0Iiwib2Zmc2V0SGVpZ2h0IiwiaW5uZXJIZWlnaHQiLCJyZXBsYWNlIl0sIm1hcHBpbmdzIjoiQUFBNkIsbUJBQWxCQSxPQUFNQyxVQUNmRCxNQUFNQyxRQUFVLFNBQVNDLEdBQ3ZCLE1BQStDLG1CQUF4Q0MsT0FBT0MsVUFBVUMsU0FBU0MsS0FBS0o7QUNGMUNLLE9BQU9D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aUJBQWlCLFFBQVMsU0FBVW1CLEdBQzNDQSxFQUFFQyxpQkFDRlIsRUFBS1MsVUFNYi9DLE1BQU1MLFVBQVVvRCxLQUFPLFdBQ3JCeEMsRUFBV1YsS0FBS2EsTUFDaEJlLEVBQWlCNUIsS0FBS2EsTUFHdEJaLE9BQU9rRCxpQkFBaUJ0QyxLQUFLQyxPQUFPc0MsT0FFcEN2QyxLQUFLQyxNQUFNRSxXQUFhSCxLQUFLQyxNQUFNdUMsYUFBZXBELE9BQU9xRCxZQUN2RCwrQkFBaUMsZ0JBQy9CekMsS0FBS2EsVUFDUGIsS0FBS2EsUUFBUVYsV0FBYSxrQkFJOUJiLE1BQU1MLFVBQVVnQyxNQUFRLFdBQ3RCLEdBQUlXLEdBQU81QixJQUVYQSxNQUFLQyxNQUFNRSxVQUFZSCxLQUFLQyxNQUFNRSxVQUFVdUMsUUFBUSxnQkFBaUIsSUFFckUxQyxLQUFLQyxNQUFNZSxpQkFBaUJHLElBQWlCLFdBQzNDSSxFQUFjSyxFQUFLM0IsU0FHakJELEtBQUthLFVBQ1BiLEtBQUthLFFBQVFWLFVBQVlILEtBQUthLFFBQVFWLFVBQVV1QyxRQUFRLGdCQUFpQixJQUV6RTFDLEtBQUthLFFBQVFHLGlCQUFpQkcsSUFBaUIsV0FDN0NJLEVBQWNLLEVBQUtmLGNBZ0V6QnpCIiwiZmlsZSI6ImFsbC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpZiAodHlwZW9mIEFycmF5LmlzQXJyYXkgPT09ICd1bmRlZmluZWQnKSB7XG4gIEFycmF5LmlzQXJyYXkgPSBmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iaikgPT09ICdbb2JqZWN0IEFycmF5XSc7XG4gIH1cbn07XG4iLCJ3aW5kb3cub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICB2YXIgbG9naW5Nb2RhbCA9IG5ldyBNb2RhbCh7XG4gICAgdGl0bGU6IFwiTG9naW4gdG8gTHlyZUZseVwiLFxuICAgIGNvbnRlbnQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibG9naW5fbWVudVwiKSxcbiAgICBsaW5rU2VsZWN0b3I6IFwiLnRyaWdnZXItbG9naW5cIlxuICB9KTtcblxuICB2YXIgcmVnaXN0ZXJNb2RhbCA9IG5ldyBNb2RhbCh7XG4gICAgdGl0bGU6IFwiUmVnaXN0ZXIgYW4gQWNjb3VudCBvbiBMeXJlRmx5XCIsXG4gICAgY29udGVudDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyZWdpc3Rlcl9tZW51XCIpLFxuICAgIGxpbmtTZWxlY3RvcjogXCIudHJpZ2dlci1yZWdpc3RlclwiXG4gIH0pO1xufVxuIiwiKGZ1bmN0aW9uIChnKSB7XG4gIGcuTW9kYWwgPSBmdW5jdGlvbiAobW9kYWxTZXR0aW5ncykge1xuICAgIC8vIEEgcmVmZXJlbmNlIHRvIHRoZSBtb2RhbCBpbiB0aGUgZG9tXG4gICAgdGhpcy5tb2RhbCA9IG51bGw7XG4gICAgdGhpcy5vdmVybGF5ID0gbnVsbDtcbiAgICB0aGlzLmNsb3NlQnV0dG9uID0gbnVsbDtcblxuICAgIC8vIEluaXRpYWxpemVkIHRvIGFsbCBvZiB0aGUgZGVmYXVsdHMgZm9yIHRoaXMgdGhpbmchXG4gICAgdGhpcy5zZXR0aW5ncyA9IHtcbiAgICAgIGNsYXNzTmFtZTogXCJ6b29tXCIsXG4gICAgICBoYXNDbG9zZUJ1dHRvbjogdHJ1ZSxcbiAgICAgIGNvbnRlbnQ6IFwiXCIsXG4gICAgICB0aXRsZTogbnVsbCxcbiAgICAgIG1heFdpZHRoOiA4MDAsXG4gICAgICBtaW5XaWR0aDogMjAwLFxuICAgICAgaGFzT3ZlcmxheTogdHJ1ZSxcbiAgICAgIGlzRml4ZWQ6IHRydWUsXG4gICAgICBsaW5rU2VsZWN0b3I6IG51bGxcbiAgICB9O1xuXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgaWYgKG1vZGFsU2V0dGluZ3MgJiYgdHlwZW9mIG1vZGFsU2V0dGluZ3MgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLnNldHRpbmdzKSB7XG4gICAgICAgIGlmIChtb2RhbFNldHRpbmdzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICB0aGlzLnNldHRpbmdzW2tleV0gPSBtb2RhbFNldHRpbmdzW2tleV1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBjb250ZW50ID0gdGhpcy5zZXR0aW5ncy5jb250ZW50O1xuICAgIGlmIChjb250ZW50ICYmIGNvbnRlbnQuaW5uZXJIVE1MKSB7XG4gICAgICBjb250ZW50ID0gY29udGVudC5pbm5lckhUTUw7XG4gICAgICByZW1vdmVFbGVtZW50KHRoaXMuc2V0dGluZ3MuY29udGVudCk7XG4gICAgICB0aGlzLnNldHRpbmdzLmNvbnRlbnQgPSBjb250ZW50O1xuICAgIH1cblxuICAgIGlmICh0aGlzLnNldHRpbmdzLmxpbmtTZWxlY3RvciAhPT0gbnVsbCkge1xuICAgICAgdmFyIGxpbmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLnNldHRpbmdzLmxpbmtTZWxlY3Rvcik7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlua3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGlua3NbaV0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIHNlbGYub3BlbigpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgTW9kYWwucHJvdG90eXBlLm9wZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgYnVpbGRNb2RhbC5jYWxsKHRoaXMpO1xuICAgIGluaXRpYWxpemVFdmVudHMuY2FsbCh0aGlzKTtcblxuICAgIC8vIEZvciBhbmltYXRpb25zXG4gICAgd2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5tb2RhbCkuaGVpZ2h0O1xuXG4gICAgdGhpcy5tb2RhbC5jbGFzc05hbWUgKz0gdGhpcy5tb2RhbC5vZmZzZXRIZWlnaHQgPiB3aW5kb3cuaW5uZXJIZWlnaHQgP1xuICAgICAgXCIgbW9kYWwtYWN0aXZlIG1vZGFsLWFuY2hvcmVkXCIgOiBcIiBtb2RhbC1hY3RpdmVcIjtcbiAgICBpZiAodGhpcy5vdmVybGF5KSB7XG4gICAgICB0aGlzLm92ZXJsYXkuY2xhc3NOYW1lICs9IFwiIG1vZGFsLWFjdGl2ZVwiO1xuICAgIH1cbiAgfTtcblxuICBNb2RhbC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgdGhpcy5tb2RhbC5jbGFzc05hbWUgPSB0aGlzLm1vZGFsLmNsYXNzTmFtZS5yZXBsYWNlKFwiIG1vZGFsLWFjdGl2ZVwiLCBcIlwiKTtcblxuICAgIHRoaXMubW9kYWwuYWRkRXZlbnRMaXN0ZW5lcih0cmFuc2l0aW9uRW5kKCksIGZ1bmN0aW9uICgpIHtcbiAgICAgIHJlbW92ZUVsZW1lbnQoc2VsZi5tb2RhbCk7XG4gICAgfSk7XG5cbiAgICBpZiAodGhpcy5vdmVybGF5KSB7XG4gICAgICB0aGlzLm92ZXJsYXkuY2xhc3NOYW1lID0gdGhpcy5vdmVybGF5LmNsYXNzTmFtZS5yZXBsYWNlKFwiIG1vZGFsLWFjdGl2ZVwiLCBcIlwiKTtcblxuICAgICAgdGhpcy5vdmVybGF5LmFkZEV2ZW50TGlzdGVuZXIodHJhbnNpdGlvbkVuZCgpLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJlbW92ZUVsZW1lbnQoc2VsZi5vdmVybGF5KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGJ1aWxkTW9kYWwgKCkge1xuICAgIHZhciBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICB0aGlzLm1vZGFsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICB0aGlzLm1vZGFsLmNsYXNzTmFtZSA9IFwibW9kYWwgXCIgKyB0aGlzLnNldHRpbmdzLmNsYXNzTmFtZTtcbiAgICB0aGlzLm1vZGFsLnN0eWxlLm1pbldpZHRoID0gdGhpcy5zZXR0aW5ncy5taW5XaWR0aCArIFwicHhcIjtcbiAgICB0aGlzLm1vZGFsLnN0eWxlLm1heFdpZHRoID0gdGhpcy5zZXR0aW5ncy5tYXhXaWR0aCArIFwicHhcIjtcblxuICAgIGlmICh0aGlzLnNldHRpbmdzLmhhc0Nsb3NlQnV0dG9uID09PSB0cnVlKSB7XG4gICAgICB0aGlzLmNsb3NlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgIHRoaXMuY2xvc2VCdXR0b24uY2xhc3NOYW1lID0gXCJtb2RhbC1jbG9zZSBtb2RhbC1jbG9zZS1idXR0b25cIjtcbiAgICAgIHRoaXMuY2xvc2VCdXR0b24uaW5uZXJIVE1MID0gXCLDl1wiO1xuICAgICAgdGhpcy5tb2RhbC5hcHBlbmRDaGlsZCh0aGlzLmNsb3NlQnV0dG9uKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zZXR0aW5ncy5oYXNPdmVybGF5ID09PSB0cnVlKSB7XG4gICAgICB0aGlzLm92ZXJsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgdGhpcy5vdmVybGF5LmNsYXNzTmFtZSA9IFwibW9kYWwtb3ZlcmxheSBcIiArIHRoaXMuc2V0dGluZ3MuY2xhc3NOYW1lO1xuICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQodGhpcy5vdmVybGF5KTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zZXR0aW5ncy50aXRsZSAhPT0gbnVsbCkge1xuICAgICAgdmFyIHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgyXCIpO1xuICAgICAgdGl0bGUuY2xhc3NOYW1lID0gXCJtb2RhbC10aXRsZVwiO1xuICAgICAgdGl0bGUuaW5uZXJIVE1MID0gdGhpcy5zZXR0aW5ncy50aXRsZTtcbiAgICAgIHRoaXMubW9kYWwuYXBwZW5kQ2hpbGQodGl0bGUpO1xuICAgIH1cblxuICAgIHZhciBjb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBjb250ZW50LmNsYXNzTmFtZSA9IFwibW9kYWwtY29udGVudFwiO1xuICAgIGNvbnRlbnQuaW5uZXJIVE1MID0gdGhpcy5zZXR0aW5ncy5jb250ZW50O1xuICAgIHRoaXMubW9kYWwuYXBwZW5kQ2hpbGQoY29udGVudCk7XG5cbiAgICBmcmFnbWVudC5hcHBlbmRDaGlsZCh0aGlzLm1vZGFsKTtcblxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZnJhZ21lbnQpO1xuICB9XG5cbiAgZnVuY3Rpb24gaW5pdGlhbGl6ZUV2ZW50cygpIHtcbiAgICBpZiAodGhpcy5jbG9zZUJ1dHRvbikge1xuICAgICAgdGhpcy5jbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY2xvc2UuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMub3ZlcmxheSkge1xuICAgICAgdGhpcy5vdmVybGF5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5jbG9zZS5iaW5kKHRoaXMpKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiB0cmFuc2l0aW9uRW5kKCkge1xuICAgIHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgaWYgKGVsLnN0eWxlLldlYmtpdFRyYW5zaXRpb24pIHJldHVybiBcIndlYmtpdFRyYW5zaXRpb25FbmRcIjtcbiAgICBpZiAoZWwuc3R5bGUuT1RyYW5zaXRpb24pIHJldHVybiBcIm9UcmFuc2l0aW9uRW5kXCI7XG4gICAgcmV0dXJuICd0cmFuc2l0aW9uZW5kJztcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZUVsZW1lbnQgKG9iaikge1xuICAgIGlmIChvYmoucGFyZW50RWxlbWVudCkge1xuICAgICAgb2JqLnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQob2JqKTtcbiAgICB9XG4gIH1cbn0od2luZG93KSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
